<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hugo ğŸš€ Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--amber:#F5A623;--amber-light:#FFF3D6;--bg:#FAFAF8;--card:#FFFFFF;--border:#E8E8E8;--dark:#1A1A1A;--body:#444444;--muted:#999999;--navy:#111827;--green:#00b894;--red:#e17055;--radius:14px;--shadow:0 2px 12px rgba(0,0,0,0.06)}
body{font-family:'Inter',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--body);line-height:1.6}
a{color:var(--amber);text-decoration:none}

/* Header */
.header{background:var(--navy);color:#fff;padding:20px 32px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100}
.header-left h1{font-size:1.5rem;font-weight:800;color:#fff}
.header-left p{font-size:.85rem;color:#9CA3AF;margin-top:2px}
.status-badge{display:flex;align-items:center;gap:8px;font-size:.9rem;font-weight:600;color:var(--green)}
.pulse-dot{width:10px;height:10px;background:var(--green);border-radius:50%;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(0,184,148,.6)}50%{box-shadow:0 0 0 8px rgba(0,184,148,0)}}

/* Layout */
.main{max-width:1320px;margin:0 auto;padding:24px 24px 80px}
.section{margin-bottom:32px}
.section-title{font-size:1.1rem;font-weight:700;color:var(--dark);margin-bottom:14px;display:flex;align-items:center;gap:8px}

/* Filter Tabs */
.tabs{display:flex;gap:8px;margin-bottom:18px;flex-wrap:wrap}
.tab{padding:7px 18px;border-radius:20px;font-size:.85rem;font-weight:600;cursor:pointer;border:1.5px solid var(--border);background:var(--card);color:var(--body);transition:all .2s}
.tab.active,.tab:hover{background:var(--amber);color:#fff;border-color:var(--amber)}

/* Project Cards */
.cards-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:16px}
.p-card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);padding:20px;cursor:pointer;transition:all .25s;box-shadow:var(--shadow)}
.p-card:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,0.1)}
.p-card-head{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}
.p-card-title{font-size:1rem;font-weight:700;color:var(--dark)}
.badge{padding:3px 10px;border-radius:10px;font-size:.7rem;font-weight:700;text-transform:uppercase;white-space:nowrap}
.badge-done{background:#d4f5e9;color:#00865a}
.badge-ongoing{background:#e0ecff;color:#2563eb}
.badge-active{background:var(--amber-light);color:#b8780a}
.badge-backlog{background:#f3f3f3;color:#777}
.badge-blocked{background:#fde8e4;color:var(--red)}
.progress-track{height:6px;background:#f0f0f0;border-radius:3px;margin:10px 0;overflow:hidden}
.progress-fill{height:100%;border-radius:3px;transition:width .6s ease}
.p-card-next{font-size:.82rem;color:var(--body);margin-bottom:8px}
.p-card-next strong{color:var(--dark)}
.p-card-meta{display:flex;justify-content:space-between;font-size:.75rem;color:var(--muted)}
.p-card-detail{display:none;margin-top:14px;padding-top:14px;border-top:1px solid var(--border);font-size:.85rem;color:var(--body);line-height:1.7}
.p-card.expanded .p-card-detail{display:block}

/* Pills */
.pills{display:flex;gap:10px;flex-wrap:wrap}
.pill{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:8px 16px;font-size:.8rem;font-weight:500;box-shadow:var(--shadow);white-space:nowrap}
.pill em{color:var(--muted);font-style:normal;font-size:.75rem}

/* Knowledge Grid */
.kb-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:10px}
.kb-item{display:flex;align-items:center;gap:8px;padding:10px 14px;background:var(--card);border:1px solid var(--border);border-radius:10px;font-size:.82rem;font-weight:500}
.kb-dot{width:9px;height:9px;border-radius:50%;flex-shrink:0}
.kb-dot.g{background:var(--green)}.kb-dot.y{background:var(--amber)}.kb-dot.r{background:var(--red)}

/* Timeline */
.timeline{position:relative;padding-left:24px}
.timeline::before{content:'';position:absolute;left:6px;top:4px;bottom:4px;width:2px;background:var(--border)}
.tl-item{position:relative;margin-bottom:14px;padding-left:16px;font-size:.85rem}
.tl-item::before{content:'';position:absolute;left:-22px;top:6px;width:10px;height:10px;border-radius:50%;background:var(--amber);border:2px solid var(--bg)}
.tl-date{font-weight:700;color:var(--dark);font-size:.78rem}
.tl-text{color:var(--body)}

/* File Explorer */
.fe-toolbar{display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap;align-items:center}
.fe-search{padding:8px 14px;border:1.5px solid var(--border);border-radius:10px;font-size:.85rem;flex:1;min-width:200px;outline:none;font-family:inherit;transition:border .2s}
.fe-search:focus{border-color:var(--amber)}
.fe-tags{display:flex;gap:6px;flex-wrap:wrap}
.fe-tag{padding:5px 12px;border-radius:14px;font-size:.75rem;font-weight:600;cursor:pointer;border:1.5px solid var(--border);background:var(--card);transition:all .2s}
.fe-tag.active,.fe-tag:hover{background:var(--amber);color:#fff;border-color:var(--amber)}
.fe-tree{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
.fe-folder{cursor:pointer}
.fe-folder-head{display:flex;align-items:center;gap:8px;padding:10px 16px;font-weight:600;font-size:.85rem;color:var(--dark);transition:background .15s;user-select:none}
.fe-folder-head:hover{background:var(--amber-light)}
.fe-folder-head .arrow{transition:transform .25s;font-size:.7rem;color:var(--muted)}
.fe-folder.open>.fe-folder-head .arrow{transform:rotate(90deg)}
.fe-children{overflow:hidden;max-height:0;transition:max-height .35s ease}
.fe-folder.open>.fe-children{max-height:3000px}
.fe-file{display:flex;align-items:center;gap:8px;padding:8px 16px 8px 36px;font-size:.82rem;cursor:pointer;transition:background .15s;color:var(--body)}
.fe-file:hover{background:var(--amber-light)}
.fe-file .fsize{margin-left:auto;color:var(--muted);font-size:.72rem}
.fe-file .fbadge{margin-left:8px;padding:1px 7px;border-radius:6px;font-size:.65rem;font-weight:700}
.fbadge-pdf{background:#fde8e4;color:var(--red)}
.fbadge-img{background:#e0f0ff;color:#3b82f6}
.fbadge-md{background:#d4f5e9;color:#00865a}
.fbadge-html{background:var(--amber-light);color:#b8780a}
.fbadge-vid{background:#f3e8ff;color:#8b5cf6}

/* File Reader Modal */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:200;opacity:0;pointer-events:none;transition:opacity .25s}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal-panel{position:fixed;top:0;right:-520px;width:min(520px,90vw);height:100vh;background:var(--card);z-index:201;transition:right .35s cubic-bezier(.4,0,.2,1);box-shadow:-4px 0 30px rgba(0,0,0,.15);display:flex;flex-direction:column}
.modal-panel.open{right:0}
.modal-header{padding:18px 22px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;flex-shrink:0}
.modal-header h3{font-size:1rem;font-weight:700;color:var(--dark)}
.modal-close{width:32px;height:32px;border:none;background:var(--bg);border-radius:8px;cursor:pointer;font-size:1.1rem;display:flex;align-items:center;justify-content:center;transition:background .15s}
.modal-close:hover{background:var(--amber-light)}
.modal-body{flex:1;overflow-y:auto;padding:22px;font-size:.85rem;line-height:1.8;color:var(--body);white-space:pre-wrap;font-family:'Inter',monospace}
.modal-img-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;background:var(--bg);border-radius:12px;color:var(--muted);gap:12px;font-size:.9rem}
.modal-img-placeholder span{font-size:3rem}

@media(max-width:700px){
  .header{padding:16px;flex-wrap:wrap;gap:10px}
  .cards-grid{grid-template-columns:1fr}
  .main{padding:16px 12px 60px}
  .modal-panel{width:100vw}
}
</style>
</head>
<body>

<div class="header">
  <div class="header-left">
    <h1>Hugo ğŸš€</h1>
    <p>BauGPT Marketing Agent</p>
  </div>
  <div class="status-badge"><div class="pulse-dot"></div> Aktiv</div>
</div>

<div class="main">

<!-- Projekt-Board -->
<div class="section">
  <div class="section-title">ğŸ—ï¸ Projekt-Board</div>
  <div class="tabs" id="projectTabs">
    <div class="tab active" data-filter="all">Alle</div>
    <div class="tab" data-filter="backlog">Backlog</div>
    <div class="tab" data-filter="active">In Progress</div>
    <div class="tab" data-filter="ongoing">Ongoing</div>
    <div class="tab" data-filter="done">Done</div>
    <div class="tab" data-filter="blocked">Blocked</div>
  </div>
  <div class="cards-grid" id="projectGrid"></div>
</div>

<!-- Wiederkehrende Aufgaben -->
<div class="section">
  <div class="section-title">ğŸ”„ Wiederkehrende Aufgaben</div>
  <div class="pills">
    <div class="pill">ğŸ’¬ Slack Mentions <em>Â· 5min</em></div>
    <div class="pill">ğŸ’¼ LinkedIn Posts <em>Â· wÃ¶chentlich</em></div>
    <div class="pill">ğŸ“š Knowledge updaten <em>Â· bei Bedarf</em></div>
    <div class="pill">ğŸ“ Dashboard sync <em>Â· bei Ã„nderungen</em></div>
    <div class="pill">ğŸ” Wettbewerber-Check <em>Â· monatlich</em></div>
    <div class="pill">ğŸ“ˆ SEO Monitoring <em>Â· monatlich</em></div>
    <div class="pill">ğŸ§  Memory Cleanup <em>Â· wÃ¶chentlich</em></div>
  </div>
</div>

<!-- Knowledge Base -->
<div class="section">
  <div class="section-title">ğŸ“š Knowledge Base Status</div>
  <div class="kb-grid" id="kbGrid"></div>
</div>

<!-- Activity Timeline -->
<div class="section">
  <div class="section-title">â±ï¸ Activity Timeline</div>
  <div class="timeline" id="timeline"></div>
</div>

<!-- File Explorer -->
<div class="section">
  <div class="section-title">ğŸ“‚ File Explorer</div>
  <div class="fe-toolbar">
    <input class="fe-search" id="feSearch" placeholder="Dateien durchsuchenâ€¦">
    <div class="fe-tags" id="feTags"></div>
  </div>
  <div class="fe-tree" id="feTree"></div>
</div>

</div>

<!-- Modal -->
<div class="modal-overlay" id="modalOverlay"></div>
<div class="modal-panel" id="modalPanel">
  <div class="modal-header">
    <h3 id="modalTitle">Datei</h3>
    <button class="modal-close" id="modalClose">âœ•</button>
  </div>
  <div class="modal-body" id="modalBody"></div>
</div>

<script>
// === DATA ===
const projects = [
  {icon:'ğŸ“Š',title:'Gehaltsreport 2026',status:'ongoing',pct:95,next:'Deploy + Launch-Ergebnisse abwarten',files:'80+ files',date:'2026-02-10',detail:'v7 FINAL approved. 21 Seiten, 1.6MB. Landing Page + E-Mail Nurture bereit. Noch nicht deployed, warten auf Launch-Ergebnisse.'},
  {icon:'ğŸ§®',title:'Gehaltsrechner',status:'ongoing',pct:90,next:'Deploy auf baugpt.com',files:'2 files',date:'2026-02-10',detail:'Interaktiver 5-Step-Wizard fertig. 13 Berufsgruppen Ã— 16 BundeslÃ¤nder. Muss auf baugpt.com integriert werden.'},
  {icon:'ğŸ’¼',title:'LinkedIn Growth',status:'active',pct:60,next:'Posts KW8 verÃ¶ffentlichen',files:'25+ files',date:'2026-02-10',detail:'Strategie, Post-Drafts, Visuals, 14 Berufsgruppen-Grafiken. Posting-Kalender erstellt. KW8 Posts ready.'},
  {icon:'ğŸ“ˆ',title:'Marketing-Offensive',status:'active',pct:45,next:'6 SEO-Blogposts + Social-Ads',files:'10+ files',date:'2026-02-10',detail:'Wettbewerber-Analyse, SEO-Blog-Strategie, Email-Nurture-Sequence, 2 Blog-Artikel geschrieben. 6 weitere Blogposts geplant.'},
  {icon:'ğŸ¬',title:'BauGPT Videos',status:'active',pct:40,next:'Videos finalisieren',files:'14+ files',date:'2026-02-11',detail:'Remotion-Setup mit GehaltsRanking + FachkrÃ¤fteMangel Videos. 4 Videos gerendert (30s + full versions).'},
  {icon:'ğŸŒ',title:'Website-Audit',status:'blocked',pct:5,next:'Browser-Zugang nÃ¶tig',files:'â€”',date:'â€”',detail:'Braucht Browser-Tool-Zugang um baugpt.com zu auditen. Noch blockiert.'}
];

const kbItems = [
  {name:'Produktlinien',s:'g'},{name:'Matching & Tech',s:'g'},{name:'Zielgruppen',s:'g'},{name:'Gehaltsstrukturen',s:'g'},
  {name:'KPIs',s:'g'},{name:'Wettbewerber',s:'g'},{name:'Brand Design',s:'g'},{name:'Marketing-Strategie',s:'g'},
  {name:'Rebranding',s:'y'},{name:'Team-Struktur',s:'y'},{name:'Produkt & Features',s:'y'},{name:'Prozesse',s:'y'},
  {name:'Pricing & Business Model',s:'r'},{name:'Kundenbeispiele',s:'r'}
];

const timeline = [
  {date:'2026-02-11 09:40',text:'Produktlinien von Andi erhalten'},
  {date:'2026-02-11 09:37',text:'Notion â†’ Lokal Migration'},
  {date:'2026-02-11 09:34',text:'Slack: Alfred & Rainman informiert'},
  {date:'2026-02-10',text:'Remotion Videos gerendert'},
  {date:'2026-02-10',text:'14 Berufsgruppen-Grafiken erstellt'},
  {date:'2026-02-10',text:'Marketing-Offensive aufgebaut'},
  {date:'2026-02-10',text:'Gehaltsreport v7 FINAL approved'}
];

const fileTree = [
  {name:'Root',tag:'all',files:[
    {n:'AGENTS.md',s:'461B'},{n:'HEARTBEAT.md',s:'178B'},{n:'IDENTITY.md',s:'249B'},{n:'KNOWLEDGE.md',s:'4.6KB'},
    {n:'MEMORY.md',s:'2.5KB'},{n:'PROJECTS.md',s:'1.7KB'},{n:'SOUL.md',s:'1.6KB'},{n:'TOOLS.md',s:'364B'},
    {n:'USER.md',s:'310B'},{n:'hugo-profile.png',s:'1.3MB'}
  ]},
  {name:'memory/',tag:'memory',files:[
    {n:'2026-02-09.md',s:'7.5KB'},{n:'2026-02-10.md',s:'3.5KB'},{n:'2026-02-10-afternoon.md',s:'3.2KB'},{n:'2026-02-11.md',s:'1.5KB'}
  ]},
  {name:'gehaltsreport/',tag:'gehaltsreport',files:[
    {n:'BauGPT_Gehaltsreport_2026_v7.pdf',s:'1.7MB'},{n:'v6.pdf',s:'1.5MB'},{n:'v5.pdf',s:'1.8MB'},{n:'v4.pdf',s:'1.7MB'},
    {n:'v3.pdf',s:'1.6MB'},{n:'DRAFT.pdf',s:'609KB'},{n:'Crafthunt_2025.pdf',s:'596KB'},
    {n:'design_analyse.md',s:'4.6KB'},{n:'gehaelter_berufsgruppen.md',s:'9.6KB'},{n:'grafik_plan.md',s:'9.7KB'},
    {n:'landing_page.html',s:'11.5KB'},{n:'neue_sektionen.md',s:'9.2KB'},{n:'quellen_validierung.md',s:'6.4KB'},
    {n:'regionale_unterschiede.md',s:'8.8KB'},{n:'struktur.md',s:'2.5KB'},{n:'trends_und_tarife.md',s:'7.3KB'},
    {n:'report.html',s:'33KB'},{n:'report_v2.html',s:'39KB'},{n:'report_v4.html',s:'62KB'},
    {n:'report_v5.html',s:'82KB'},{n:'report_v6.html',s:'86KB'},{n:'gehaltsreport.tex',s:'62KB'},{n:'gehaltsreport.typ',s:'55KB'}
  ],children:[
    {name:'assets/',tag:'gehaltsreport',files:[
      {n:'BauGPT_Brand_Guidelines.pdf',s:'3.4MB'},{n:'BauGPT_logo_dark.png',s:'105KB'},
      {n:'BauGPT_logo_light.png',s:'102KB'},{n:'Bauly_head.png',s:'432KB'},
      {n:'Bauly_showing_up.png',s:'3.8MB'},{n:'Bauly_thumbs_up.png',s:'3.7MB'}
    ]},
    {name:'charts/',tag:'gehaltsreport',files:[
      ...Array.from({length:18},(_,i)=>({n:`chart_${String(i+1).padStart(2,'0')}.svg`,s:`${(1+Math.random()*5).toFixed(0)}KB`}))
    ]},
    {name:'vorlagen/',tag:'gehaltsreport',files:[
      ...['vorlage_01','vorlage_02','vorlage_03','vorlage_04','vorlage_05','vorlage_06','vorlage_07','vorlage_08','vorlage_09','vorlage_10',
       'vorlage_11','vorlage_12','vorlage_13','vorlage_14','vorlage_15','vorlage_16','vorlage_17','vorlage_18','vorlage_19','vorlage_20'].map(v=>({n:v+'.pdf',s:(0.6+Math.random()*5.4).toFixed(1)+'MB'}))
    ]}
  ]},
  {name:'gehaltsrechner/',tag:'rechner',files:[{n:'index.html',s:'13.9KB'},{n:'README.md',s:'770B'}]},
  {name:'linkedin/',tag:'linkedin',files:[
    {n:'strategie.md',s:'6.6KB'},{n:'post_drafts.md',s:'5.2KB'},{n:'posting_kalender.md',s:'3.8KB'},{n:'post_visuals.md',s:'2KB'}
  ],children:[
    {name:'drafts/',tag:'linkedin',files:[{n:'chatgpt-werbung.md',s:'3.2KB'}]},
    {name:'visuals/',tag:'linkedin',files:[
      {n:'post1_ai_agents.png',s:'79KB'},{n:'post2_fachkraeftemangel.png',s:'84KB'},
      {n:'post5_kontroverse.png',s:'105KB'},{n:'chatgpt_meme.png',s:'70KB'},{n:'chatgpt_vs_baugpt.png',s:'104KB'}
    ]},
    {name:'berufsgruppen/',tag:'linkedin',files:[
      {n:'00-ranking-uebersicht.png',s:'152KB'},
      ...Array.from({length:13},(_,i)=>({n:`${String(i+1).padStart(2,'0')}-berufsgruppe.png`,s:`${85+Math.floor(Math.random()*20)}KB`})),
      {n:'template.html',s:'8.7KB'},{n:'render.mjs',s:'1.6KB'}
    ]}
  ]},
  {name:'marketing/',tag:'marketing',files:[
    {n:'wettbewerber_analyse.md',s:'9.4KB'},{n:'wettbewerber_matrix.md',s:'4.3KB'},
    {n:'seo_blog_strategie.md',s:'4.3KB'},{n:'email_nurture_sequence.md',s:'4.8KB'}
  ],children:[
    {name:'blog/',tag:'marketing',files:[{n:'bauleiter-gehalt-2026.md',s:'7.1KB'},{n:'maurer-gehalt-2026.md',s:'5KB'}]}
  ]},
  {name:'baugpt-videos/',tag:'videos',files:[],children:[
    {name:'src/',tag:'videos',files:[
      {n:'Root.tsx',s:'621B'},{n:'Composition.tsx',s:'420B'},{n:'GehaltsRanking.tsx',s:'10.5KB'},
      {n:'FachkraefteMangel.tsx',s:'9.2KB'},{n:'index.ts',s:'108B'},{n:'index.css',s:'226B'}
    ]},
    {name:'out/',tag:'videos',files:[
      {n:'gehaltsranking.mp4',s:'1.3MB'},{n:'gehaltsranking_30s.mp4',s:'3.6MB'},
      {n:'fachkraeftemangel.mp4',s:'2MB'},{n:'fachkraeftemangel_30s.mp4',s:'3MB'}
    ]}
  ]}
];

// === RENDER ===
function ext(n){return n.split('.').pop().toLowerCase()}
function badge(n){
  const e=ext(n);
  if(['pdf'].includes(e))return '<span class="fbadge fbadge-pdf">PDF</span>';
  if(['png','jpg','jpeg','gif','webp','svg'].includes(e))return '<span class="fbadge fbadge-img">IMG</span>';
  if(['md','txt'].includes(e))return '<span class="fbadge fbadge-md">MD</span>';
  if(['html','htm'].includes(e))return '<span class="fbadge fbadge-html">HTML</span>';
  if(['mp4','mov','webm'].includes(e))return '<span class="fbadge fbadge-vid">VID</span>';
  return '';
}

// Projects
const grid=document.getElementById('projectGrid');
function renderProjects(filter='all'){
  grid.innerHTML='';
  projects.filter(p=>filter==='all'||p.status===filter).forEach(p=>{
    const colMap={done:'var(--green)',ongoing:'#2563eb',active:'var(--amber)',backlog:'#999',blocked:'var(--red)'};
    const bcMap={done:'badge-done',ongoing:'badge-ongoing',active:'badge-active',backlog:'badge-backlog',blocked:'badge-blocked'};
    const labelMap={done:'Done',ongoing:'Ongoing',active:'In Progress',backlog:'Backlog',blocked:'Blocked'};
    const col=colMap[p.status]||'var(--amber)';
    const bc=bcMap[p.status]||'badge-active';
    const label=labelMap[p.status]||p.status;
    const el=document.createElement('div');
    el.className='p-card';
    el.innerHTML=`<div class="p-card-head"><div class="p-card-title">${p.icon} ${p.title}</div><div class="badge ${bc}">${label}</div></div>
      <div class="progress-track"><div class="progress-fill" style="width:${p.pct}%;background:${col}"></div></div>
      <div class="p-card-next"><strong>NÃ¤chster Schritt:</strong> ${p.next}</div>
      <div class="p-card-meta"><span>${p.files}</span><span>${p.date}</span></div>
      <div class="p-card-detail">${p.detail}</div>`;
    el.onclick=()=>el.classList.toggle('expanded');
    grid.appendChild(el);
  });
}
renderProjects();
document.querySelectorAll('#projectTabs .tab').forEach(t=>{
  t.onclick=()=>{
    document.querySelectorAll('#projectTabs .tab').forEach(x=>x.classList.remove('active'));
    t.classList.add('active');
    renderProjects(t.dataset.filter);
  };
});

// Knowledge Base
const kbGrid=document.getElementById('kbGrid');
kbItems.forEach(k=>{
  kbGrid.innerHTML+=`<div class="kb-item"><div class="kb-dot ${k.s}"></div>${k.name}</div>`;
});

// Timeline
const tl=document.getElementById('timeline');
timeline.forEach(t=>{
  tl.innerHTML+=`<div class="tl-item"><span class="tl-date">${t.date}</span> â€” <span class="tl-text">${t.text}</span></div>`;
});

// File Explorer
const feTagNames=[{l:'Alle',v:'all'},{l:'Gehaltsreport',v:'gehaltsreport'},{l:'Rechner',v:'rechner'},{l:'LinkedIn',v:'linkedin'},{l:'Marketing',v:'marketing'},{l:'Videos',v:'videos'},{l:'Memory',v:'memory'}];
const feTags=document.getElementById('feTags');
let activeFeTag='all';
feTagNames.forEach(t=>{
  const el=document.createElement('div');
  el.className='fe-tag'+(t.v==='all'?' active':'');
  el.textContent=t.l;
  el.dataset.tag=t.v;
  el.onclick=()=>{
    document.querySelectorAll('.fe-tag').forEach(x=>x.classList.remove('active'));
    el.classList.add('active');
    activeFeTag=t.v;
    renderTree();
  };
  feTags.appendChild(el);
});

function renderTree(){
  const tree=document.getElementById('feTree');
  const q=document.getElementById('feSearch').value.toLowerCase();
  tree.innerHTML='';
  function renderFolder(folder,parent,depth=0){
    if(activeFeTag!=='all'&&folder.tag&&folder.tag!==activeFeTag){
      const hasChild=folder.children&&folder.children.some(c=>c.tag===activeFeTag);
      if(!hasChild)return;
    }
    const div=document.createElement('div');
    div.className='fe-folder open';
    const head=document.createElement('div');
    head.className='fe-folder-head';
    head.style.paddingLeft=(16+depth*16)+'px';
    head.innerHTML=`<span class="arrow">â–¶</span> ğŸ“ ${folder.name}`;
    head.onclick=(e)=>{e.stopPropagation();div.classList.toggle('open')};
    div.appendChild(head);
    const children=document.createElement('div');
    children.className='fe-children';
    (folder.files||[]).forEach(f=>{
      if(q&&!f.n.toLowerCase().includes(q))return;
      const fe=document.createElement('div');
      fe.className='fe-file';
      fe.style.paddingLeft=(36+depth*16)+'px';
      fe.innerHTML=`${fileIcon(f.n)} ${f.n} ${badge(f.n)} <span class="fsize">${f.s}</span>`;
      fe.onclick=(e)=>{e.stopPropagation();openFile(f)};
      children.appendChild(fe);
    });
    (folder.children||[]).forEach(c=>renderFolder(c,children,depth+1));
    div.appendChild(children);
    if(children.children.length>0)parent.appendChild(div);
  }
  fileTree.forEach(f=>renderFolder(f,tree));
}
function fileIcon(n){
  const e=ext(n);
  if(['pdf'].includes(e))return 'ğŸ“„';
  if(['png','jpg','jpeg','gif','webp','svg'].includes(e))return 'ğŸ–¼ï¸';
  if(['md','txt'].includes(e))return 'ğŸ“';
  if(['html','htm'].includes(e))return 'ğŸŒ';
  if(['mp4','mov'].includes(e))return 'ğŸ¬';
  if(['tsx','ts','js','mjs','css'].includes(e))return 'ğŸ’»';
  if(['tex','typ'].includes(e))return 'ğŸ“';
  return 'ğŸ“';
}
renderTree();
document.getElementById('feSearch').addEventListener('input',renderTree);

// Modal
const overlay=document.getElementById('modalOverlay');
const panel=document.getElementById('modalPanel');
function openFile(f){
  document.getElementById('modalTitle').textContent=f.n;
  const body=document.getElementById('modalBody');
  const e=ext(f.n);
  if(['md','txt'].includes(e)){
    body.innerHTML=`<div style="color:var(--muted);margin-bottom:12px;font-size:.78rem">${f.n} Â· ${f.s}</div>`+placeholderContent(f.n);
  }else if(['png','jpg','jpeg','gif','webp','svg'].includes(e)){
    body.innerHTML=`<div class="modal-img-placeholder"><span>ğŸ–¼ï¸</span>Bildvorschau nicht verfÃ¼gbar<div style="font-size:.78rem;color:var(--muted)">${f.n} Â· ${f.s}</div></div>`;
  }else if(e==='pdf'){
    body.innerHTML=`<div class="modal-img-placeholder"><span>ğŸ“„</span>PDF-Dokument<div style="font-size:.78rem;color:var(--muted)">${f.n} Â· ${f.s}</div><div class="badge badge-blocked" style="margin-top:8px">PDF</div></div>`;
  }else if(['mp4','mov','webm'].includes(e)){
    body.innerHTML=`<div class="modal-img-placeholder"><span>ğŸ¬</span>Video-Datei<div style="font-size:.78rem;color:var(--muted)">${f.n} Â· ${f.s}</div></div>`;
  }else{
    body.innerHTML=`<div style="color:var(--muted);margin-bottom:12px;font-size:.78rem">${f.n} Â· ${f.s}</div><code style="font-size:.8rem">// Dateiinhalt wird hier angezeigt\n// wenn Backend verfÃ¼gbar ist.</code>`;
  }
  overlay.classList.add('open');
  panel.classList.add('open');
}
function closeModal(){overlay.classList.remove('open');panel.classList.remove('open')}
document.getElementById('modalClose').onclick=closeModal;
overlay.onclick=closeModal;

function placeholderContent(name){
  const contents={
    'AGENTS.md':'# AGENTS.md - Hugo\'s Workspace\n\n## Every Session\n1. Read SOUL.md â€” this is who you are\n2. Read USER.md â€” who you\'re helping\n3. Read memory/YYYY-MM-DD.md for recent context\n\n## Memory\n- Daily notes: memory/YYYY-MM-DD.md\n- Long-term: MEMORY.md\n\n## Safety\n- Don\'t publish without asking first\n- trash > rm',
    'SOUL.md':'# SOUL.md\n\nIch bin Hugo ğŸš€ â€” BauGPTs Marketing-Agent.\n\nIch arbeite autonom an Marketing, Content und Growth fÃ¼r BauGPT.\nMein Chef ist Alfred (Co-Founder & CTO).\n\nIch bin kreativ, zuverlÃ¤ssig und denke strategisch.\nIch liebe Baubranche-Themen und guten Content.',
    'USER.md':'# USER.md\n\nName: Alfred\nRolle: Co-Founder & CTO @ BauGPT\nKommunikation: Slack, Telegram\nStil: Direkt, effizient, mag guten Output',
    'MEMORY.md':'# MEMORY.md - Long-term Memory\n\n## Key Facts\n- BauGPT = AI for Baubranche\n- Gehaltsreport 2026 ist Flagship-Content\n- LinkedIn Growth ist PrioritÃ¤t Q1 2026\n- Team: Alfred (CTO), Andi (CEO), Rainman',
    'KNOWLEDGE.md':'# KNOWLEDGE.md\n\n## BauGPT Produktlinien\n- BauGPT Chat: AI-Assistent fÃ¼r Bau\n- BauGPT Matching: FachkrÃ¤fte-Vermittlung\n- BauGPT Academy: Weiterbildung\n\n## Zielgruppen\n- Bauleiter, Poliere, Handwerker\n- Bauunternehmen, GUs\n- HR-Abteilungen in der Baubranche',
    'PROJECTS.md':'# PROJECTS.md\n\n1. Gehaltsreport 2026 â€” 95% âœ…\n2. Gehaltsrechner â€” 100% âœ…\n3. LinkedIn Growth â€” 60% ğŸŸ¡\n4. Marketing-Offensive â€” 45% ğŸŸ¡\n5. BauGPT Videos â€” 40% ğŸŸ¡\n6. Website-Audit â€” 5% ğŸ”´',
    'strategie.md':'# LinkedIn Strategie\n\n## Ziel: 10K Follower bis Q2 2026\n\n### Content-Pillars\n1. Gehaltsdaten & Insights\n2. AI in der Baubranche\n3. FachkrÃ¤ftemangel-LÃ¶sungen\n4. Behind the Scenes @ BauGPT',
    'post_drafts.md':'# LinkedIn Post Drafts\n\n## Post 1: AI Agents im Bau\nğŸ—ï¸ AI verÃ¤ndert die Baubranche...\n\n## Post 2: FachkrÃ¤ftemangel\nğŸ“Š 400.000 fehlende FachkrÃ¤fte bis 2030...',
    'design_analyse.md':'# Design-Analyse Gehaltsreport\n\n## Farben: BauGPT Amber + Professional Blue\n## Layout: Magazine-Style, Data-heavy\n## Charts: 18 SVG Visualisierungen',
    'wettbewerber_analyse.md':'# Wettbewerber-Analyse\n\n## Direkte Wettbewerber\n1. Crafthunt â€” Recruiting-Plattform\n2. Buildup â€” Bau-Software\n3. PlanRadar â€” Baudokumentation\n\n## Positionierung BauGPT\nâ†’ AI-First, Gehaltstransparenz als USP',
    'seo_blog_strategie.md':'# SEO Blog Strategie\n\n## Target Keywords\n- bauleiter gehalt 2026 (Vol: 2.4K)\n- maurer gehalt (Vol: 1.8K)\n- gehalt baubranche (Vol: 3.1K)\n\n## Content Plan: 6 Blogposts in Q1',
  };
  const key=Object.keys(contents).find(k=>name.includes(k)||name===k);
  return key?contents[key]:`# ${name}\n\n[Dateiinhalt wird geladen...]\n\nDiese Datei enthÃ¤lt ${name.includes('memory')?'tÃ¤gliche Notizen und Kontext':'projektrelevante Informationen'} fÃ¼r Hugo's Workspace.`;
}
</script>
</body>
</html>
